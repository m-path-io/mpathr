<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert m-Path timestamps to a date time format — timestamps_to_datetime • mpathr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert m-Path timestamps to a date time format — timestamps_to_datetime"><meta name="description" content="
m-Path timestamps are based on the participant's local time zone, and when converted to R
datetime format, they are interpreted as being in Coordinated Universal Time (UTC),
previously known Greenwich Mean Time (GMT). This function allows for the conversion of m-Path
timestamps to datetime, and optionally allows for the specification of a UTC offset or a forced
time zone."><meta property="og:description" content="
m-Path timestamps are based on the participant's local time zone, and when converted to R
datetime format, they are interpreted as being in Coordinated Universal Time (UTC),
previously known Greenwich Mean Time (GMT). This function allows for the conversion of m-Path
timestamps to datetime, and optionally allows for the specification of a UTC offset or a forced
time zone."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mpathr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mpathr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/m-path-io/mpathr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Convert m-Path timestamps to a date time format</h1>
      <small class="dont-index">Source: <a href="https://github.com/m-path-io/mpathr/blob/master/R/timestamps_to_datetime.R" class="external-link"><code>R/timestamps_to_datetime.R</code></a></small>
      <div class="d-none name"><code>timestamps_to_datetime.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="figures/lifecycle-stable.svg" alt="[Stable]"></a></p>
<p>m-Path timestamps are based on the participant's local time zone, and when converted to R
datetime format, they are interpreted as being in Coordinated Universal Time (UTC),
previously known Greenwich Mean Time (GMT). This function allows for the conversion of m-Path
timestamps to datetime, and optionally allows for the specification of a UTC offset or a forced
time zone.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">timestamps_to_datetime</span><span class="op">(</span><span class="va">x</span>, tz_offset <span class="op">=</span> <span class="cn">NULL</span>, force_tz <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vector of timestamps to be transformed to datetime.</p></dd>


<dt id="arg-tz-offset">tz_offset<a class="anchor" aria-label="anchor" href="#arg-tz-offset"></a></dt>
<dd><p>A numeric value to be added to the timestamps before transforming to datetime.
This is typically derived from the <code>timeZoneOffset</code> column from m-Path data. This is only
useful when you want to compare timestamps in an absolute manner or link it to external data
sources.</p></dd>


<dt id="arg-force-tz">force_tz<a class="anchor" aria-label="anchor" href="#arg-force-tz"></a></dt>
<dd><p>A string specifying the time zone to force the timestamps to. This is useful when
the data is to be compared to other data sources that are in a different time zone. Note that
this will not change the actual time of the timestamp, but only the time zone that is
displayed. A list of time zones can be used in <code><a href="https://rdrr.io/r/base/timezones.html" class="external-link">OlsonNames()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A vector of <code>POSIXct</code> objects representing the timestamps in the UTC time zone. The time
zone may differ if <code>force_tz</code> is specified.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function has three use cases:</p><ol><li><p>The most common use case: You have only ESM data and want to work in each participant's
local time zone. In this case, the <code>tz_offset</code> and <code>force_tz</code> should be left empty. This is
likely the right use case for you.</p></li>
<li><p>You have ESM data and external data (e.g. sensing data or data from a multi-lab study) that
you want to match based on their time stamp. The external data is likely in UTC while m-Path data
is in the participant's local time zone. In this case, you should specify the <code>tz_offset</code>
argument to convert the local time stamps to true UTC time. However, this will change the time
stamp to UTC so you will <strong>lose the ability to work in the local time zone</strong>.</p></li>
<li><p>This is a more specialised version of use case 2, namely when you are certain that every
participant lives in the same time zone and there not been any changes in daylight savings time.
In this case, you can specify the <code>force_tz</code> argument to set the same time zone for all
participants. This will not change the displayed time (11AM will stay 11AM) but will change the
underlying time zone.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a></h2>



<p>Timestamps in m-Path, like those in <code>timeStampScheduled</code> and <code>timeStampStart</code>, are a variation on
UNIX timestamps, defined as the number of seconds since January 1, 1970, at 00:00:00. However,
unlike standard UNIX timestamps (which use UTC), m-Path timestamps are based on the participant's
local time zone. This is because we are generally interested in time from the participant's
perspective and not in an absolute sense compared to other participants. Unfortunately, having
multiple time zones in a single column is a not possible in R, which is why all time zones are
(incorrectly) displayed as UTC.</p>
<p>When converted to <code>R</code> datetime format, they may display as UTC, which could lead
to confusion. This typically isn't an issue when analyzing ESM data within the participant's
local context, but it can affect comparisons with other data sources. For accurate
cross-referencing with other data, consider specifying the UTC offset to correctly adjust for the
participant’s local time. Alternatively, you can force the timestamps to display in a specific
time zone using the <code>force_tz</code> argument.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_mpath.html">read_mpath</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="mpath_example.html">mpath_example</a></span><span class="op">(</span><span class="st">"example_basic.csv"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="mpath_example.html">mpath_example</a></span><span class="op">(</span><span class="st">"example_meta.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The most common use case for this function: Convert</span></span></span>
<span class="r-in"><span><span class="co"># `timeStampStart` to datetime. Remember that these are in the</span></span></span>
<span class="r-in"><span><span class="co"># local time zone, but R displays them as being in UTC.</span></span></span>
<span class="r-in"><span><span class="fu">timestamps_to_datetime</span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">timeStampStart</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2024-04-18 09:55:42 UTC" "2024-04-19 08:16:42 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "2024-04-19 09:00:31 UTC" "2024-04-19 15:24:27 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "2024-04-19 17:20:04 UTC" "2024-04-19 20:08:40 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "2024-04-19 21:48:08 UTC" "2024-04-19 22:15:22 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "2024-04-20 09:32:02 UTC" "2024-04-20 11:26:45 UTC"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert `timeStampStop` to datetime, but as being the correct</span></span></span>
<span class="r-in"><span><span class="co"># value in UTC.</span></span></span>
<span class="r-in"><span><span class="fu">timestamps_to_datetime</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">timeStampStop</span>,</span></span>
<span class="r-in"><span>  tz_offset <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">timeZoneOffset</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2024-04-18 07:57:30 UTC" "2024-04-19 06:17:54 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "2024-04-19 07:01:08 UTC" "2024-04-19 13:25:11 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "2024-04-19 15:20:50 UTC" "2024-04-19 18:09:27 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "2024-04-19 19:48:31 UTC" "2024-04-19 20:16:08 UTC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "2024-04-20 07:32:35 UTC" "2024-04-20 09:27:11 UTC"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Let's convert `timeStampSent` to datetime, but this time we want to</span></span></span>
<span class="r-in"><span><span class="co"># force the time zone to be in "America/New_York" as we know all</span></span></span>
<span class="r-in"><span><span class="co"># participants were in this time zone and so we can link with other</span></span></span>
<span class="r-in"><span><span class="co"># data that is also in New York's time zone.</span></span></span>
<span class="r-in"><span><span class="fu">timestamps_to_datetime</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">timeStampSent</span>,</span></span>
<span class="r-in"><span>  force_tz <span class="op">=</span> <span class="st">"America/New_York"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "2024-04-18 09:55:41 EDT" "2024-04-19 08:16:36 EDT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "2024-04-19 09:00:28 EDT" "2024-04-19 15:02:56 EDT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "2024-04-19 17:17:57 EDT" "2024-04-19 19:44:27 EDT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "2024-04-19 21:23:23 EDT" "2024-04-19 22:10:01 EDT"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "2024-04-20 09:03:24 EDT" "2024-04-20 11:26:28 EDT"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Merijn Mestdagh, Lara Navarrete, Koen Niemeijer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

