<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract App Usage from Paired Name/Value Columns — extract_app_usage • mpathr</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract App Usage from Paired Name/Value Columns — extract_app_usage"><meta name="description" content='Parses app names and usage values into structured usage data, with
start and end timestamps and usage durations for both "Far" and "Near" windows.'><meta property="og:description" content='Parses app names and usage values into structured usage data, with
start and end timestamps and usage durations for both "Far" and "Near" windows.'><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mpathr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/mpathr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/m-path-io/mpathr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract App Usage from Paired Name/Value Columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/m-path-io/mpathr/blob/master/R/extract_app_usage.R" class="external-link"><code>R/extract_app_usage.R</code></a></small>
      <div class="d-none name"><code>extract_app_usage.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Parses app names and usage values into structured usage data, with
start and end timestamps and usage durations for both "Far" and "Near" windows.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_app_usage</span><span class="op">(</span><span class="va">app_names</span>, <span class="va">app_values</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-app-names">app_names<a class="anchor" aria-label="anchor" href="#arg-app-names"></a></dt>
<dd><p>Either a character vector (comma-separated strings) or
a list of character vectors, one per row.</p></dd>


<dt id="arg-app-values">app_values<a class="anchor" aria-label="anchor" href="#arg-app-values"></a></dt>
<dd><p>Either a character vector (comma-separated strings) or
a list of numeric vectors, one per row. Each block of 6 values corresponds
to one app's usage record.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list of tibbles (one per input row). Each tibble contains one or more rows:</p><ul><li><p><code>app</code>: App name</p></li>
<li><p><code>startTimeFar</code>, <code>endTimeFar</code>: POSIXct timestamps (UTC)</p></li>
<li><p><code>usageFar</code>: Integer usage during the far window</p></li>
<li><p><code>startTimeNear</code>, <code>endTimeNear</code>: POSIXct timestamps (UTC)</p></li>
<li><p><code>usageNear</code>: Integer usage during the near window</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The input can be formatted in two ways:</p><ul><li><p>If the data is in its raw form (e.g. imported from CSV via <code><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv()</a></code>), both
<code>app_names</code> and <code>app_values</code> should be character vectors where
each element is a comma-separated string.</p></li>
<li><p>If the data was imported via <code><a href="read_mpath.html">read_mpath()</a></code>, then <code>app_names</code> should
be a list of character vectors, and <code>app_values</code> should be a list of
integer vectors.</p></li>
</ul><p>The function expects that each app is associated with exactly six values:
<code>startTimeFar</code>, <code>endTimeFar</code>, <code>usageFar</code>,
<code>startTimeNear</code>, <code>endTimeNear</code>, <code>usageNear</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="time-windows">Time windows<a class="anchor" aria-label="anchor" href="#time-windows"></a></h2>


<p>Each measurement of app usage includes two time windows: a "near: window that captures recent app
activity (typically ending around the time of the ESM beep), and a "far" window that covers the
24 hours prior to the near window. For both windows, Android automatically provides a start time,
an end time, and the total usage in seconds during that period. These time ranges are determined
by the operating system and may vary across apps and across measurements. Because the start and
end times of these app usage windows rarely align exactly with the time between ESM beeps,
interpreting the values requires caution as the window may include usage that occurred before the
last beep To draw meaningful conclusions about app use between two beeps, it is important to
consider which time windows and how much each window overlaps with that interval. Differences in
the length and timing of these windows can affect your interpretation and should be accounted for
in your analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Using character input (e.g., raw from CSV)</span></span></span>
<span class="r-in"><span><span class="va">app_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foo"</span>, <span class="st">"foo,bar"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">app_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"1000,2000,1,3000,4000,2"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"4000,5000,3,6000,7000,4,8000,9000,5,10000,11000,6"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extract_app_usage</span><span class="op">(</span><span class="va">app_names</span>, <span class="va">app_values</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app   startTimeFar        endTimeFar          usageFar startTimeNear      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> foo   1970-01-01 <span style="color: #949494;">00:00:01</span> 1970-01-01 <span style="color: #949494;">00:00:02</span>        1 1970-01-01 <span style="color: #949494;">00:00:03</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: endTimeNear &lt;dttm&gt;, usageNear &lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app   startTimeFar        endTimeFar          usageFar startTimeNear      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> foo   1970-01-01 <span style="color: #949494;">00:00:04</span> 1970-01-01 <span style="color: #949494;">00:00:05</span>        3 1970-01-01 <span style="color: #949494;">00:00:06</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> bar   1970-01-01 <span style="color: #949494;">00:00:08</span> 1970-01-01 <span style="color: #949494;">00:00:09</span>        5 1970-01-01 <span style="color: #949494;">00:00:10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: endTimeNear &lt;dttm&gt;, usageNear &lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using list-column input (e.g., from read_mpath())</span></span></span>
<span class="r-in"><span><span class="va">app_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"foo"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"foo"</span>, <span class="st">"bar"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">app_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>,<span class="fl">2000</span>,<span class="fl">1</span>,<span class="fl">3000</span>,<span class="fl">4000</span>,<span class="fl">2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4000</span>,<span class="fl">5000</span>,<span class="fl">3</span>,<span class="fl">6000</span>,<span class="fl">7000</span>,<span class="fl">4</span>,<span class="fl">8000</span>,<span class="fl">9000</span>,<span class="fl">5</span>,<span class="fl">10000</span>,<span class="fl">11000</span>,<span class="fl">6</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extract_app_usage</span><span class="op">(</span><span class="va">app_names</span>, <span class="va">app_values</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app   startTimeFar        endTimeFar          usageFar startTimeNear      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> foo   1970-01-01 <span style="color: #949494;">00:00:01</span> 1970-01-01 <span style="color: #949494;">00:00:02</span>        1 1970-01-01 <span style="color: #949494;">00:00:03</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: endTimeNear &lt;dttm&gt;, usageNear &lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[2]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app   startTimeFar        endTimeFar          usageFar startTimeNear      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> foo   1970-01-01 <span style="color: #949494;">00:00:04</span> 1970-01-01 <span style="color: #949494;">00:00:05</span>        3 1970-01-01 <span style="color: #949494;">00:00:06</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> bar   1970-01-01 <span style="color: #949494;">00:00:08</span> 1970-01-01 <span style="color: #949494;">00:00:09</span>        5 1970-01-01 <span style="color: #949494;">00:00:10</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: endTimeNear &lt;dttm&gt;, usageNear &lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can also use this function within a tidyverse pipeline:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>app_name <span class="op">=</span> <span class="va">app_names</span>, app_value <span class="op">=</span> <span class="va">app_values</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>usage <span class="op">=</span> <span class="fu">extract_app_usage</span><span class="op">(</span><span class="va">app_name</span>, <span class="va">app_value</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   app_name  app_value  usage           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">&lt;chr [1]&gt;</span> <span style="color: #949494;">&lt;dbl [6]&gt;</span>  <span style="color: #949494;">&lt;tibble [1 × 7]&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> <span style="color: #949494;">&lt;chr [2]&gt;</span> <span style="color: #949494;">&lt;dbl [12]&gt;</span> <span style="color: #949494;">&lt;tibble [2 × 7]&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Merijn Mestdagh, Lara Navarrete, Koen Niemeijer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

